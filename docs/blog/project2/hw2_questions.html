<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.23">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Hanhua Zhu">

<title>Poisson Regression Examples – hanhuazhu’s website</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-226bd0f977fa82dfae4534cac220d79a.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-2d3a5f678c659c6d9658e8627949fb9f.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">hanhuazhu’s website</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../resume.html"> 
<span class="menu-text">My Resume</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../blog.html"> 
<span class="menu-text">Projects</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#blueprinty-case-study" id="toc-blueprinty-case-study" class="nav-link active" data-scroll-target="#blueprinty-case-study">Blueprinty Case Study</a>
  <ul class="collapse">
  <li><a href="#introduction" id="toc-introduction" class="nav-link" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#data" id="toc-data" class="nav-link" data-scroll-target="#data">Data</a></li>
  </ul></li>
  <li><a href="#histogram-and-mean-comparison-by-customer-status" id="toc-histogram-and-mean-comparison-by-customer-status" class="nav-link" data-scroll-target="#histogram-and-mean-comparison-by-customer-status">Histogram and Mean Comparison by Customer Status</a></li>
  <li><a href="#summary-statistics-of-patent-counts-by-customer-status" id="toc-summary-statistics-of-patent-counts-by-customer-status" class="nav-link" data-scroll-target="#summary-statistics-of-patent-counts-by-customer-status">Summary Statistics of Patent Counts by Customer Status</a>
  <ul class="collapse">
  <li><a href="#key-findings-patent-counts-by-customer-status" id="toc-key-findings-patent-counts-by-customer-status" class="nav-link" data-scroll-target="#key-findings-patent-counts-by-customer-status">Key Findings: Patent Counts by Customer Status</a></li>
  </ul></li>
  <li><a href="#comparison-of-regions-and-ages-by-customer-status" id="toc-comparison-of-regions-and-ages-by-customer-status" class="nav-link" data-scroll-target="#comparison-of-regions-and-ages-by-customer-status">Comparison of Regions and Ages by Customer Status</a>
  <ul class="collapse">
  <li><a href="#estimation-of-simple-poisson-model" id="toc-estimation-of-simple-poisson-model" class="nav-link" data-scroll-target="#estimation-of-simple-poisson-model">Estimation of Simple Poisson Model</a></li>
  <li><a href="#estimation-of-simple-poisson-model-1" id="toc-estimation-of-simple-poisson-model-1" class="nav-link" data-scroll-target="#estimation-of-simple-poisson-model-1">Estimation of Simple Poisson Model</a></li>
  <li><a href="#interpretation-of-poisson-log-likelihood" id="toc-interpretation-of-poisson-log-likelihood" class="nav-link" data-scroll-target="#interpretation-of-poisson-log-likelihood">Interpretation of Poisson Log-Likelihood</a></li>
  <li><a href="#poisson-log-likelihood-curve-for-different-values-of-lambda" id="toc-poisson-log-likelihood-curve-for-different-values-of-lambda" class="nav-link" data-scroll-target="#poisson-log-likelihood-curve-for-different-values-of-lambda">Poisson Log-Likelihood Curve for Different Values of <span class="math inline">\(\lambda\)</span></a></li>
  <li><a href="#interpretation-of-log-likelihood-curve" id="toc-interpretation-of-log-likelihood-curve" class="nav-link" data-scroll-target="#interpretation-of-log-likelihood-curve">Interpretation of Log-Likelihood Curve</a></li>
  <li><a href="#deriving-the-mle-for-lambda-analytically" id="toc-deriving-the-mle-for-lambda-analytically" class="nav-link" data-scroll-target="#deriving-the-mle-for-lambda-analytically">Deriving the MLE for <span class="math inline">\(\lambda\)</span> Analytically</a></li>
  <li><a href="#estimated-lambda-from-maximum-likelihood" id="toc-estimated-lambda-from-maximum-likelihood" class="nav-link" data-scroll-target="#estimated-lambda-from-maximum-likelihood">Estimated <span class="math inline">\(\lambda\)</span> from Maximum Likelihood</a></li>
  <li><a href="#maximum-likelihood-estimation-of-lambda-via-optimization" id="toc-maximum-likelihood-estimation-of-lambda-via-optimization" class="nav-link" data-scroll-target="#maximum-likelihood-estimation-of-lambda-via-optimization">Maximum Likelihood Estimation of <span class="math inline">\(\lambda\)</span> via Optimization</a></li>
  <li><a href="#estimation-of-poisson-regression-model" id="toc-estimation-of-poisson-regression-model" class="nav-link" data-scroll-target="#estimation-of-poisson-regression-model">Estimation of Poisson Regression Model</a></li>
  <li><a href="#poisson-regression-log-likelihood-function" id="toc-poisson-regression-log-likelihood-function" class="nav-link" data-scroll-target="#poisson-regression-log-likelihood-function">Poisson Regression Log-Likelihood Function</a></li>
  <li><a href="#interpretation-of-poisson-regression-results" id="toc-interpretation-of-poisson-regression-results" class="nav-link" data-scroll-target="#interpretation-of-poisson-regression-results">Interpretation of Poisson Regression Results</a></li>
  <li><a href="#comparison-of-mle-and-glm-estimates-with-standardized-inputs" id="toc-comparison-of-mle-and-glm-estimates-with-standardized-inputs" class="nav-link" data-scroll-target="#comparison-of-mle-and-glm-estimates-with-standardized-inputs">Comparison of MLE and GLM Estimates (with Standardized Inputs)</a></li>
  <li><a href="#interpretation-of-mle-and-glm-estimates" id="toc-interpretation-of-mle-and-glm-estimates" class="nav-link" data-scroll-target="#interpretation-of-mle-and-glm-estimates">Interpretation of MLE and GLM Estimates</a></li>
  <li><a href="#estimating-the-effect-of-blueprinty-software-on-patent-success" id="toc-estimating-the-effect-of-blueprinty-software-on-patent-success" class="nav-link" data-scroll-target="#estimating-the-effect-of-blueprinty-software-on-patent-success">Estimating the Effect of Blueprinty Software on Patent Success</a></li>
  <li><a href="#estimated-effect-of-blueprintys-software-on-patent-success" id="toc-estimated-effect-of-blueprintys-software-on-patent-success" class="nav-link" data-scroll-target="#estimated-effect-of-blueprintys-software-on-patent-success">Estimated Effect of Blueprinty’s Software on Patent Success</a></li>
  </ul></li>
  <li><a href="#airbnb-case-study" id="toc-airbnb-case-study" class="nav-link" data-scroll-target="#airbnb-case-study">AirBnB Case Study</a>
  <ul class="collapse">
  <li><a href="#introduction-1" id="toc-introduction-1" class="nav-link" data-scroll-target="#introduction-1">Introduction</a></li>
  </ul></li>
  <li><a href="#modeling-airbnb-booking-activity" id="toc-modeling-airbnb-booking-activity" class="nav-link" data-scroll-target="#modeling-airbnb-booking-activity">Modeling Airbnb Booking Activity</a>
  <ul class="collapse">
  <li><a href="#summary-statistics-of-key-variables" id="toc-summary-statistics-of-key-variables" class="nav-link" data-scroll-target="#summary-statistics-of-key-variables">Summary Statistics of Key Variables</a></li>
  <li><a href="#summary-statistics-for-numeric-variables" id="toc-summary-statistics-for-numeric-variables" class="nav-link" data-scroll-target="#summary-statistics-for-numeric-variables">Summary Statistics for Numeric Variables</a></li>
  <li><a href="#distribution-of-number-of-reviews-by-room-type" id="toc-distribution-of-number-of-reviews-by-room-type" class="nav-link" data-scroll-target="#distribution-of-number-of-reviews-by-room-type">Distribution of Number of Reviews by Room Type</a></li>
  <li><a href="#reviews-vs.-price" id="toc-reviews-vs.-price" class="nav-link" data-scroll-target="#reviews-vs.-price">Reviews vs.&nbsp;Price</a></li>
  <li><a href="#reviews-vs.-days-listed" id="toc-reviews-vs.-days-listed" class="nav-link" data-scroll-target="#reviews-vs.-days-listed">Reviews vs.&nbsp;Days Listed</a></li>
  <li><a href="#reviews-by-instant-bookable-status" id="toc-reviews-by-instant-bookable-status" class="nav-link" data-scroll-target="#reviews-by-instant-bookable-status">Reviews by Instant Bookable Status</a></li>
  <li><a href="#reviews-by-cleanliness-score" id="toc-reviews-by-cleanliness-score" class="nav-link" data-scroll-target="#reviews-by-cleanliness-score">Reviews by Cleanliness Score</a></li>
  <li><a href="#listings-per-room-type" id="toc-listings-per-room-type" class="nav-link" data-scroll-target="#listings-per-room-type">Listings per Room Type</a></li>
  <li><a href="#exploratory-visualizations-key-insights" id="toc-exploratory-visualizations-key-insights" class="nav-link" data-scroll-target="#exploratory-visualizations-key-insights">Exploratory Visualizations: Key Insights</a></li>
  <li><a href="#poisson-regression-model-predicting-review-counts-from-listing-features" id="toc-poisson-regression-model-predicting-review-counts-from-listing-features" class="nav-link" data-scroll-target="#poisson-regression-model-predicting-review-counts-from-listing-features">Poisson Regression Model: Predicting Review Counts from Listing Features</a></li>
  <li><a href="#interpretation-of-poisson-regression-results-1" id="toc-interpretation-of-poisson-regression-results-1" class="nav-link" data-scroll-target="#interpretation-of-poisson-regression-results-1">Interpretation of Poisson Regression Results</a></li>
  <li><a href="#final-reflections" id="toc-final-reflections" class="nav-link" data-scroll-target="#final-reflections">Final Reflections</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Poisson Regression Examples</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Hanhua Zhu </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">Invalid Date</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="blueprinty-case-study" class="level2">
<h2 class="anchored" data-anchor-id="blueprinty-case-study">Blueprinty Case Study</h2>
<section id="introduction" class="level3">
<h3 class="anchored" data-anchor-id="introduction">Introduction</h3>
<p>Blueprinty is a small firm that makes software for developing blueprints specifically for submitting patent applications to the US patent office. Their marketing team would like to make the claim that patent applicants using Blueprinty’s software are more successful in getting their patent applications approved. Ideal data to study such an effect might include the success rate of patent applications before using Blueprinty’s software and after using it. Unfortunately, such data is not available.</p>
<p>However, Blueprinty has collected data on 1,500 mature (non-startup) engineering firms. The data include each firm’s number of patents awarded over the last 5 years, regional location, age since incorporation, and whether or not the firm uses Blueprinty’s software. The marketing team would like to use this data to make the claim that firms using Blueprinty’s software are more successful in getting their patent applications approved.</p>
</section>
<section id="data" class="level3">
<h3 class="anchored" data-anchor-id="data">Data</h3>
<p>We begin by loading the dataset containing information on engineering firms and their patenting activity. This includes whether or not a firm uses Blueprinty’s software.</p>
<div id="08ef8b08" class="cell" data-execution_count="1">
<div class="cell-output cell-output-display" data-execution_count="1">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">patents</th>
<th data-quarto-table-cell-role="th">region</th>
<th data-quarto-table-cell-role="th">age</th>
<th data-quarto-table-cell-role="th">iscustomer</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>0</td>
<td>Midwest</td>
<td>32.5</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>3</td>
<td>Southwest</td>
<td>37.5</td>
<td>0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>4</td>
<td>Northwest</td>
<td>27.0</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>3</td>
<td>Northeast</td>
<td>24.5</td>
<td>0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>3</td>
<td>Southwest</td>
<td>37.0</td>
<td>0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>The first few rows of the dataset show each firm’s number of patents, regional location, age, and whether they are a Blueprinty customer. We see a mix of customer (<code>iscustomer = 1</code>) and non-customer firms, with patent counts ranging from 0 to 4. Firm ages vary from around 24 to 38 years, and regions span categories like Midwest and Southwest. These observations suggest the data is well-structured for count-based modeling and that customer status, region, and firm age may all influence patenting outcomes.</p>
</section>
</section>
<section id="histogram-and-mean-comparison-by-customer-status" class="level2">
<h2 class="anchored" data-anchor-id="histogram-and-mean-comparison-by-customer-status">Histogram and Mean Comparison by Customer Status</h2>
<p>We begin by comparing the distribution and average number of patents between firms that use Blueprinty’s software and those that do not.</p>
<div id="cell-fig-styled-hist-hue" class="cell" data-message="false" data-execution_count="2">
<div class="cell-output cell-output-display">
<div id="fig-styled-hist-hue" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-styled-hist-hue-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="hw2_questions_files/figure-html/fig-styled-hist-hue-output-1.png" width="944" height="560" class="figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-styled-hist-hue-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1: Distribution of Number of Patents by Customer Status
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="summary-statistics-of-patent-counts-by-customer-status" class="level2">
<h2 class="anchored" data-anchor-id="summary-statistics-of-patent-counts-by-customer-status">Summary Statistics of Patent Counts by Customer Status</h2>
<div class="cell" data-message="false" data-execution_count="3">
<div id="tbl-patents-summary" class="cell quarto-float quarto-figure quarto-figure-center anchored" data-execution_count="3" data-message="false">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-patents-summary-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;1: Summary Statistics of Patents by Customer Status
</figcaption>
<div aria-describedby="tbl-patents-summary-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output cell-output-display" data-execution_count="3">
<div>


<table class="dataframe do-not-create-environment cell caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">mean</th>
<th data-quarto-table-cell-role="th">std</th>
<th data-quarto-table-cell-role="th">count</th>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">customer_status</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Customer</td>
<td>4.133056</td>
<td>2.546846</td>
<td>481</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Non-Customer</td>
<td>3.473013</td>
<td>2.225060</td>
<td>1019</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</figure>
</div>
</div>
<hr>
<section id="key-findings-patent-counts-by-customer-status" class="level3">
<h3 class="anchored" data-anchor-id="key-findings-patent-counts-by-customer-status">Key Findings: Patent Counts by Customer Status</h3>
<ul>
<li><strong>Blueprinty customers</strong> had a higher average number of patents (<strong>4.13</strong>) compared to <strong>non-customers</strong> (<strong>3.47</strong>), based on the summary statistics.</li>
<li>The <strong>distribution</strong> of patent counts (see histogram) shows that customers are more likely to have <strong>larger patent portfolios</strong>, with a noticeable <strong>rightward skew</strong> relative to non-customers.</li>
<li>This pattern suggests a potential <strong>positive association</strong> between using Blueprinty’s software and increased patent productivity.</li>
<li><strong>However</strong>, this is only a <strong>descriptive comparison</strong>. Differences may be due to other firm characteristics such as <strong>region</strong> or <strong>age</strong>. Further <strong>causal modeling</strong> (e.g., regression analysis or matching) is needed to determine whether the use of Blueprinty’s software actually drives higher patent output.</li>
</ul>
<p>Blueprinty customers are not selected at random. It may be important to account for systematic differences in the age and regional location of customers vs non-customers.</p>
</section>
</section>
<section id="comparison-of-regions-and-ages-by-customer-status" class="level2">
<h2 class="anchored" data-anchor-id="comparison-of-regions-and-ages-by-customer-status">Comparison of Regions and Ages by Customer Status</h2>
<div id="cell-fig-region-by-customer" class="cell" data-message="false" data-execution_count="4">
<div class="cell-output cell-output-display">
<div id="fig-region-by-customer" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-region-by-customer-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="hw2_questions_files/figure-html/fig-region-by-customer-output-1.png" width="944" height="560" class="figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-region-by-customer-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2: Distribution of Firms by Region and Customer Status
</figcaption>
</figure>
</div>
</div>
</div>
<div id="cell-fig-age-by-customer" class="cell" data-message="false" data-execution_count="5">
<div class="cell-output cell-output-display">
<div id="fig-age-by-customer" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-age-by-customer-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="hw2_questions_files/figure-html/fig-age-by-customer-output-1.png" width="752" height="464" class="figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-age-by-customer-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3: Distribution of Firm Age by Customer Status
</figcaption>
</figure>
</div>
</div>
</div>
<hr>
<p>• Regional Differences: The bar chart comparing customer status by region (Figure <a href="#fig-region-by-customer" class="quarto-xref">Figure&nbsp;2</a>) shows substantial variation in software adoption across regions. For example, the Northeast has a notably higher number of Blueprinty customers compared to non-customers, while regions like the Midwest and Southwest are dominated by non-customers. This suggests that geographic location may influence adoption—potentially due to industry concentration, marketing reach, or regional innovation ecosystems.</p>
<p>• Age Differences: The boxplot in Figure <a href="#fig-age-by-customer" class="quarto-xref">Figure&nbsp;3</a> indicates that customer firms tend to be slightly older than non-customers. While the median age is only modestly higher for customers, the distribution shows a broader spread and slightly higher upper quartiles, suggesting some older firms are more likely to adopt the software.</p>
<p>• Conclusion: These findings imply that both region and firm age may confound the observed relationship between customer status and patent output. Any further analysis aiming to assess the impact of Blueprinty’s software should control for these variables to avoid biased conclusions.</p>
<section id="estimation-of-simple-poisson-model" class="level3">
<h3 class="anchored" data-anchor-id="estimation-of-simple-poisson-model">Estimation of Simple Poisson Model</h3>
<p>Since our outcome variable of interest can only be small integer values per a set unit of time, we can use a Poisson density to model the number of patents awarded to each engineering firm over the last 5 years. We start by estimating a simple Poisson model via Maximum Likelihood.</p>
</section>
<section id="estimation-of-simple-poisson-model-1" class="level3">
<h3 class="anchored" data-anchor-id="estimation-of-simple-poisson-model-1">Estimation of Simple Poisson Model</h3>
<p>We assume the number of patents per firm, <span class="math inline">\(Y_i\)</span>, follows a Poisson distribution: <span class="math inline">\(Y_i \sim \text{Poisson}(\lambda)\)</span>. The probability mass function is:</p>
<p><span class="math display">\[
f(Y_i | \lambda) = \frac{e^{-\lambda} \lambda^{Y_i}}{Y_i!}
\]</span></p>
<p>The log-likelihood for <span class="math inline">\(n\)</span> observations is:</p>
<p><span class="math display">\[
\log \mathcal{L}(\lambda) = -n\lambda + \left( \sum_{i=1}^{n} Y_i \right) \log \lambda - \sum_{i=1}^{n} \log(Y_i!)
\]</span></p>
<p>We compute this value below for a given <span class="math inline">\(\lambda\)</span>.</p>
<div id="poisson-loglik" class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy.special <span class="im">import</span> gammaln</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Load data</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.read_csv(<span class="st">"/Users/hanhuazhu/Desktop/mywebsite/blog/project2/blueprinty.csv"</span>)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> df[<span class="st">"patents"</span>]</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> poisson_log_likelihood(y, lamb):</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>    n <span class="op">=</span> <span class="bu">len</span>(y)</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">-</span>n <span class="op">*</span> lamb <span class="op">+</span> y.<span class="bu">sum</span>() <span class="op">*</span> np.log(lamb) <span class="op">-</span> gammaln(y <span class="op">+</span> <span class="dv">1</span>).<span class="bu">sum</span>()</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>lambda_val <span class="op">=</span> <span class="fl">3.5</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>loglik <span class="op">=</span> poisson_log_likelihood(y, lambda_val)</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Poisson log-likelihood at lambda = </span><span class="sc">{</span>lambda_val<span class="sc">}</span><span class="ss">: </span><span class="sc">{</span>loglik<span class="sc">:.4f}</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Poisson log-likelihood at lambda = 3.5: -3374.8661</code></pre>
</div>
</div>
</section>
<section id="interpretation-of-poisson-log-likelihood" class="level3">
<h3 class="anchored" data-anchor-id="interpretation-of-poisson-log-likelihood">Interpretation of Poisson Log-Likelihood</h3>
<p>The Poisson log-likelihood evaluated at <span class="math inline">\(\lambda = 3.5\)</span> is:</p>
<pre><code>Poisson log-likelihood at lambda = 3.5: −3374.8661</code></pre>
<p>This value is <strong>higher (less negative)</strong> than the log-likelihood computed at <span class="math inline">\(\lambda = 4.0\)</span>, which was approximately −3386.84. Therefore, a rate parameter of <span class="math inline">\(\lambda = 3.5\)</span> provides a <strong>better fit</strong> to the observed patent count data under the Poisson model.</p>
<blockquote class="blockquote">
<p><strong>Note</strong>: This is still a trial value. To find the best-fitting <span class="math inline">\(\lambda\)</span>, we must identify the value that <strong>maximizes</strong> the log-likelihood function. In the next step, we estimate the <strong>Maximum Likelihood Estimator (MLE)</strong> numerically.</p>
</blockquote>
</section>
<section id="poisson-log-likelihood-curve-for-different-values-of-lambda" class="level3">
<h3 class="anchored" data-anchor-id="poisson-log-likelihood-curve-for-different-values-of-lambda">Poisson Log-Likelihood Curve for Different Values of <span class="math inline">\(\lambda\)</span></h3>
<div id="cell-fig-poisson-loglik-curve" class="cell" data-execution_count="7">
<div class="cell-output cell-output-display">
<div id="fig-poisson-loglik-curve" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-poisson-loglik-curve-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="hw2_questions_files/figure-html/fig-poisson-loglik-curve-output-1.png" width="752" height="464" class="figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-poisson-loglik-curve-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;4: Poisson Log-Likelihood as a Function of λ
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="interpretation-of-log-likelihood-curve" class="level3">
<h3 class="anchored" data-anchor-id="interpretation-of-log-likelihood-curve">Interpretation of Log-Likelihood Curve</h3>
<p>The figure (Figure <a href="#fig-poisson-loglik-curve" class="quarto-xref">Figure&nbsp;4</a>) displays the <strong>Poisson log-likelihood</strong> as a function of the rate parameter <span class="math inline">\(\lambda\)</span>, based on the observed patent counts.</p>
<ul>
<li>The <strong>x-axis</strong> represents different values of <span class="math inline">\(\lambda\)</span>, which is the assumed average number of patents per firm.</li>
<li>The <strong>y-axis</strong> shows the corresponding <strong>log-likelihood</strong> of the data under the Poisson model for each value of <span class="math inline">\(\lambda\)</span>.</li>
</ul>
<p>We observe that the log-likelihood curve reaches its <strong>maximum</strong> around <span class="math inline">\(\lambda \approx 3.68\)</span>, indicating the value that best fits the data under the Poisson assumption. This value is the <strong>Maximum Likelihood Estimate (MLE)</strong> of <span class="math inline">\(\lambda\)</span>.</p>
<p>The <strong>red dashed line</strong> on the graph marks the <strong>sample mean</strong> of the observed patent counts: [ _{} = {Y} = 3.6847 ]</p>
<p>Since the log-likelihood function is concave, this plot visually confirms that the MLE is both valid and unique. The alignment between the peak of the curve and the sample mean also confirms that, under a simple Poisson model, the MLE of <span class="math inline">\(\lambda\)</span> is the sample mean.</p>
</section>
<section id="deriving-the-mle-for-lambda-analytically" class="level3">
<h3 class="anchored" data-anchor-id="deriving-the-mle-for-lambda-analytically">Deriving the MLE for <span class="math inline">\(\lambda\)</span> Analytically</h3>
<p>We take the first derivative of the log-likelihood function and solve for <span class="math inline">\(\lambda\)</span>:</p>
<p><span class="math display">\[
\log \mathcal{L}(\lambda) = -n\lambda + \left( \sum_{i=1}^{n} Y_i \right) \log \lambda - \sum_{i=1}^{n} \log(Y_i!)
\]</span></p>
<p>Taking the derivative with respect to <span class="math inline">\(\lambda\)</span>:</p>
<p><span class="math display">\[
\frac{d}{d\lambda} \log \mathcal{L}(\lambda) = -n + \frac{\sum Y_i}{\lambda}
\]</span></p>
<p>Setting the derivative equal to zero:</p>
<p><span class="math display">\[
-n + \frac{\sum Y_i}{\lambda} = 0
\Rightarrow
\lambda = \frac{\sum Y_i}{n} = \bar{Y}
\]</span></p>
<p>Now we verify this with code:</p>
<div id="cell-lambda-mle-analytical" class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.read_csv(<span class="st">"/Users/hanhuazhu/Desktop/mywebsite/blog/project2/blueprinty.csv"</span>)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>Y <span class="op">=</span> df[<span class="st">"patents"</span>]</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>lambda_mle <span class="op">=</span> Y.mean()</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>lambda_mle</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="lambda-mle-analytical" class="cell-output cell-output-display" data-execution_count="8">
<pre><code>3.6846666666666668</code></pre>
</div>
</div>
</section>
<section id="estimated-lambda-from-maximum-likelihood" class="level3">
<h3 class="anchored" data-anchor-id="estimated-lambda-from-maximum-likelihood">Estimated <span class="math inline">\(\lambda\)</span> from Maximum Likelihood</h3>
<p>Using numerical optimization of the Poisson log-likelihood function, we find that the maximum likelihood estimate (MLE) of <span class="math inline">\(\lambda\)</span> is:</p>
<pre><code>λ̂ = 3.6846666666666668</code></pre>
<p>This value represents the estimated average number of patents per firm over the 5-year period. It corresponds to the value of <span class="math inline">\(\lambda\)</span> that <strong>maximizes the likelihood</strong> of the observed data under the Poisson model.</p>
<p>As expected, this estimate matches the <strong>sample mean</strong> of the observed patent counts:</p>
<p>[ _{} = {Y} ]</p>
<p>This confirms both the analytical derivation and numerical optimization.</p>
</section>
<section id="maximum-likelihood-estimation-of-lambda-via-optimization" class="level3">
<h3 class="anchored" data-anchor-id="maximum-likelihood-estimation-of-lambda-via-optimization">Maximum Likelihood Estimation of <span class="math inline">\(\lambda\)</span> via Optimization</h3>
<p>We now find the MLE of <span class="math inline">\(\lambda\)</span> by optimizing the log-likelihood function using <code>scipy.optimize.minimize</code> in Python.</p>
<div id="cell-mle-optimization" class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy.special <span class="im">import</span> gammaln</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy.optimize <span class="im">import</span> minimize</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.read_csv(<span class="st">"/Users/hanhuazhu/Desktop/mywebsite/blog/project2/blueprinty.csv"</span>)</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>Y_data <span class="op">=</span> df[<span class="st">"patents"</span>]</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> poisson_log_likelihood(y, lamb):</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>    n <span class="op">=</span> <span class="bu">len</span>(y)</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">-</span>n <span class="op">*</span> lamb <span class="op">+</span> y.<span class="bu">sum</span>() <span class="op">*</span> np.log(lamb) <span class="op">-</span> gammaln(y <span class="op">+</span> <span class="dv">1</span>).<span class="bu">sum</span>()</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> neg_poisson_log_likelihood(lambd):</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">-</span>poisson_log_likelihood(Y_data, lambd[<span class="dv">0</span>])</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>initial_guess <span class="op">=</span> [Y_data.mean()]</span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>result <span class="op">=</span> minimize(neg_poisson_log_likelihood, x0<span class="op">=</span>initial_guess, bounds<span class="op">=</span>[(<span class="fl">1e-5</span>, <span class="va">None</span>)])</span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>estimated_lambda <span class="op">=</span> result.x[<span class="dv">0</span>]</span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>estimated_lambda</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="mle-optimization" class="cell-output cell-output-display" data-execution_count="9">
<pre><code>3.6846666666666668</code></pre>
</div>
</div>
<p>The optimization routine returns an estimated <span class="math inline">\(\hat{\lambda} \approx 3.6847\)</span>, which confirms our earlier analytical result that the MLE of <span class="math inline">\(\lambda\)</span> is equal to the sample mean under a Poisson model.</p>
</section>
<section id="estimation-of-poisson-regression-model" class="level3">
<h3 class="anchored" data-anchor-id="estimation-of-poisson-regression-model">Estimation of Poisson Regression Model</h3>
<p>Next, we extend our simple Poisson model to a Poisson Regression Model such that <span class="math inline">\(Y_i = \text{Poisson}(\lambda_i)\)</span> where <span class="math inline">\(\lambda_i = \exp(X_i'\beta)\)</span>. The interpretation is that the success rate of patent awards is not constant across all firms (<span class="math inline">\(\lambda\)</span>) but rather is a function of firm characteristics <span class="math inline">\(X_i\)</span>. Specifically, we will use the covariates age, age squared, region, and whether the firm is a customer of Blueprinty.</p>
</section>
<section id="poisson-regression-log-likelihood-function" class="level3">
<h3 class="anchored" data-anchor-id="poisson-regression-log-likelihood-function">Poisson Regression Log-Likelihood Function</h3>
<p>We now define the log-likelihood function for the Poisson regression model. This function takes in:</p>
<ul>
<li>a parameter vector <span class="math inline">\(\beta\)</span>,</li>
<li>a response vector <span class="math inline">\(Y\)</span>, and</li>
<li>a covariate matrix <span class="math inline">\(X\)</span>,</li>
</ul>
<p>and assumes the inverse link function <span class="math inline">\(g^{-1}(\cdot) = \exp(\cdot)\)</span> so that:</p>
<p><span class="math display">\[
\lambda_i = \exp(X_i^\top \beta)
\]</span></p>
<p>This guarantees <span class="math inline">\(\lambda_i &gt; 0\)</span> for all observations, as required in the Poisson model. The resulting log-likelihood function is:</p>
<p><span class="math display">\[
\log \mathcal{L}(\beta) = \sum_{i=1}^{n} \left( Y_i \log(\lambda_i) - \lambda_i - \log(Y_i!) \right)
\]</span></p>
<p>Below is the corresponding Python implementation.</p>
<div id="poisson-loglik-eval" class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> poisson_regression_log_likelihood(beta, Y, X):</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>    beta <span class="op">=</span> np.asarray(beta, dtype<span class="op">=</span>np.float64).reshape(<span class="op">-</span><span class="dv">1</span>)  <span class="co"># Force float64 1D</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>    X <span class="op">=</span> np.asarray(X, dtype<span class="op">=</span>np.float64)</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>    Y <span class="op">=</span> np.asarray(Y, dtype<span class="op">=</span>np.float64)</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>    X_beta <span class="op">=</span> np.dot(X, beta)</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>    lambd <span class="op">=</span> np.exp(X_beta)</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> np.<span class="bu">sum</span>(Y <span class="op">*</span> np.log(lambd) <span class="op">-</span> lambd <span class="op">-</span> gammaln(Y <span class="op">+</span> <span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="prepare-design-matrix" class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Load the dataset</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.read_csv(<span class="st">"/Users/hanhuazhu/Desktop/mywebsite/blog/project2/blueprinty.csv"</span>)</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Add a new column: age squared</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"age_sq"</span>] <span class="op">=</span> df[<span class="st">"age"</span>] <span class="op">**</span> <span class="dv">2</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Create dummy variables for the 'region' column</span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>X_region <span class="op">=</span> pd.get_dummies(df[<span class="st">"region"</span>], drop_first<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the full design matrix X</span></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>X <span class="op">=</span> pd.concat([</span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>    pd.Series(<span class="dv">1</span>, index<span class="op">=</span>df.index, name<span class="op">=</span><span class="st">"intercept"</span>),</span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>    df[[<span class="st">"age"</span>, <span class="st">"age_sq"</span>, <span class="st">"iscustomer"</span>]],</span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a>    X_region</span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a>], axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert predictors and outcome to numpy arrays</span></span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a>X_np <span class="op">=</span> X.to_numpy(dtype<span class="op">=</span>np.float64)</span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a>Y_np <span class="op">=</span> df[<span class="st">"patents"</span>].astype(<span class="bu">float</span>).to_numpy()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="54a907a6" class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>X_clean <span class="op">=</span> pd.concat([</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>    pd.Series(<span class="fl">1.0</span>, index<span class="op">=</span>df.index, name<span class="op">=</span><span class="st">"intercept"</span>), </span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>    df[[<span class="st">"age"</span>, <span class="st">"age_sq"</span>, <span class="st">"iscustomer"</span>]].astype(<span class="bu">float</span>),</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>    pd.get_dummies(df[<span class="st">"region"</span>], drop_first<span class="op">=</span><span class="va">True</span>).astype(<span class="bu">float</span>)</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>], axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>X_np <span class="op">=</span> X_clean.to_numpy(dtype<span class="op">=</span>np.float64)  </span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>Y_np <span class="op">=</span> df[<span class="st">"patents"</span>].astype(<span class="bu">float</span>).to_numpy()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="b0aada0b" class="cell" data-execution_count="13">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.preprocessing <span class="im">import</span> StandardScaler</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy.optimize <span class="im">import</span> minimize</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> neg_poisson_regression_log_likelihood(beta, Y, X):</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">-</span>poisson_regression_log_likelihood(beta, Y, X)</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>scaler <span class="op">=</span> StandardScaler()</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>X_scaled <span class="op">=</span> scaler.fit_transform(X_np)  </span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>initial_beta <span class="op">=</span> np.zeros(X_scaled.shape[<span class="dv">1</span>])  </span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>result <span class="op">=</span> minimize(</span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>    fun<span class="op">=</span>neg_poisson_regression_log_likelihood,</span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>    x0<span class="op">=</span>initial_beta,</span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>    args<span class="op">=</span>(Y_np, X_scaled),</span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>    method<span class="op">=</span><span class="st">'BFGS'</span></span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a>beta_hat <span class="op">=</span> result.x</span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a>beta_hat</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="13">
<pre><code>array([ 0.        ,  4.86327848, -5.39349539,  0.25685043,  0.04115259,
       -0.0186009 ,  0.05259172,  0.06118601])</code></pre>
</div>
</div>
<div id="c8a3bce6" class="cell" data-execution_count="14">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>cov_beta <span class="op">=</span> result.hess_inv</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>se_beta <span class="op">=</span> np.sqrt(np.diagonal(cov_beta))</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>regression_output <span class="op">=</span> pd.DataFrame({</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Feature"</span>: X.columns,          </span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Coefficient"</span>: beta_hat,</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Standard Error"</span>: se_beta</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>regression_output</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="14">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Feature</th>
<th data-quarto-table-cell-role="th">Coefficient</th>
<th data-quarto-table-cell-role="th">Standard Error</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>intercept</td>
<td>0.000000</td>
<td>1.000000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>age</td>
<td>4.863278</td>
<td>0.023264</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>age_sq</td>
<td>-5.393495</td>
<td>0.034351</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>iscustomer</td>
<td>0.256850</td>
<td>0.024364</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>Northeast</td>
<td>0.041153</td>
<td>0.046839</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">5</td>
<td>Northwest</td>
<td>-0.018601</td>
<td>0.037803</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">6</td>
<td>South</td>
<td>0.052592</td>
<td>0.048988</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7</td>
<td>Southwest</td>
<td>0.061186</td>
<td>0.049165</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="c5dc9683" class="cell" data-execution_count="15">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> statsmodels.api <span class="im">as</span> sm</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>glm_model <span class="op">=</span> sm.GLM(Y_np, X_np, family<span class="op">=</span>sm.families.Poisson())</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>glm_results <span class="op">=</span> glm_model.fit()</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>glm_results.summary()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="15">
<table class="simpletable caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<caption>Generalized Linear Model Regression Results</caption>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Dep. Variable:</td>
<td>y</td>
<td data-quarto-table-cell-role="th">No. Observations:</td>
<td>1500</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Model:</td>
<td>GLM</td>
<td data-quarto-table-cell-role="th">Df Residuals:</td>
<td>1492</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Model Family:</td>
<td>Poisson</td>
<td data-quarto-table-cell-role="th">Df Model:</td>
<td>7</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Link Function:</td>
<td>Log</td>
<td data-quarto-table-cell-role="th">Scale:</td>
<td>1.0000</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Method:</td>
<td>IRLS</td>
<td data-quarto-table-cell-role="th">Log-Likelihood:</td>
<td>-3258.1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Date:</td>
<td>Wed, 28 May 2025</td>
<td data-quarto-table-cell-role="th">Deviance:</td>
<td>2143.3</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Time:</td>
<td>21:13:09</td>
<td data-quarto-table-cell-role="th">Pearson chi2:</td>
<td>2.07e+03</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">No. Iterations:</td>
<td>5</td>
<td data-quarto-table-cell-role="th">Pseudo R-squ. (CS):</td>
<td>0.1360</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Covariance Type:</td>
<td>nonrobust</td>
<td data-quarto-table-cell-role="th"></td>
<td></td>
</tr>
</tbody>
</table>


<table class="simpletable caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<tbody>
<tr class="odd">
<td></td>
<td data-quarto-table-cell-role="th">coef</td>
<td data-quarto-table-cell-role="th">std err</td>
<td data-quarto-table-cell-role="th">z</td>
<td data-quarto-table-cell-role="th">P&gt;|z|</td>
<td data-quarto-table-cell-role="th">[0.025</td>
<td data-quarto-table-cell-role="th">0.975]</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">const</td>
<td>-0.5089</td>
<td>0.183</td>
<td>-2.778</td>
<td>0.005</td>
<td>-0.868</td>
<td>-0.150</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">x1</td>
<td>0.1486</td>
<td>0.014</td>
<td>10.716</td>
<td>0.000</td>
<td>0.121</td>
<td>0.176</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">x2</td>
<td>-0.0030</td>
<td>0.000</td>
<td>-11.513</td>
<td>0.000</td>
<td>-0.003</td>
<td>-0.002</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">x3</td>
<td>0.2076</td>
<td>0.031</td>
<td>6.719</td>
<td>0.000</td>
<td>0.147</td>
<td>0.268</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">x4</td>
<td>0.0292</td>
<td>0.044</td>
<td>0.669</td>
<td>0.504</td>
<td>-0.056</td>
<td>0.115</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">x5</td>
<td>-0.0176</td>
<td>0.054</td>
<td>-0.327</td>
<td>0.744</td>
<td>-0.123</td>
<td>0.088</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">x6</td>
<td>0.0566</td>
<td>0.053</td>
<td>1.074</td>
<td>0.283</td>
<td>-0.047</td>
<td>0.160</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">x7</td>
<td>0.0506</td>
<td>0.047</td>
<td>1.072</td>
<td>0.284</td>
<td>-0.042</td>
<td>0.143</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="interpretation-of-poisson-regression-results" class="level3">
<h3 class="anchored" data-anchor-id="interpretation-of-poisson-regression-results">Interpretation of Poisson Regression Results</h3>
<p>We estimated a Poisson Generalized Linear Model (GLM) using <code>statsmodels.GLM</code> with a <strong>log link function</strong>, appropriate for modeling count data (e.g., number of patents per firm).</p>
<hr>
<section id="model-specification" class="level4">
<h4 class="anchored" data-anchor-id="model-specification">Model Specification</h4>
<ul>
<li><strong>Family</strong>: Poisson</li>
<li><strong>Link Function</strong>: Log</li>
<li><strong>Fitting Method</strong>: IRLS (Iteratively Reweighted Least Squares)</li>
<li><strong>Data</strong>: 1,500 engineering firms</li>
<li><strong>Predictors</strong>:
<ul>
<li>Intercept (constant)</li>
<li>Age of the firm</li>
<li>Age squared (to capture nonlinearity)</li>
<li>Binary indicator for Blueprinty customer status</li>
<li>Region dummy variables (with one region dropped as reference)</li>
</ul></li>
</ul>
<p>The model takes the form:</p>
<p>The model takes the form:</p>
<p><span class="math display">\[
\log(\lambda_i) = \beta_0 + \beta_1 \cdot \text{age}_i + \beta_2 \cdot \text{age}_i^2 + \beta_3 \cdot \text{iscustomer}_i + \text{region effects}
\]</span></p>
</section>
<section id="model-fit-summary" class="level4">
<h4 class="anchored" data-anchor-id="model-fit-summary">Model Fit Summary</h4>
<table class="caption-top table">
<colgroup>
<col style="width: 21%">
<col style="width: 16%">
<col style="width: 62%">
</colgroup>
<thead>
<tr class="header">
<th>Metric</th>
<th>Value</th>
<th>Interpretation</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Log-Likelihood</td>
<td>-3258.1</td>
<td>Higher (less negative) = better fit</td>
</tr>
<tr class="even">
<td>Deviance</td>
<td>2143.3</td>
<td>Lower values = better fit</td>
</tr>
<tr class="odd">
<td>Pearson Chi²</td>
<td>2070.0</td>
<td>Large values may suggest overdispersion</td>
</tr>
<tr class="even">
<td>Pseudo R² (McFadden)</td>
<td>0.1360</td>
<td>Model explains ~13.6% of the deviance</td>
</tr>
<tr class="odd">
<td>No.&nbsp;of Iterations</td>
<td>5</td>
<td>Convergence in 5 IRLS iterations</td>
</tr>
</tbody>
</table>
<hr>
</section>
<section id="coefficient-interpretation" class="level4">
<h4 class="anchored" data-anchor-id="coefficient-interpretation">Coefficient Interpretation</h4>
<table class="caption-top table">
<colgroup>
<col style="width: 12%">
<col style="width: 16%">
<col style="width: 15%">
<col style="width: 11%">
<col style="width: 24%">
<col style="width: 20%">
</colgroup>
<thead>
<tr class="header">
<th>Term</th>
<th>Coefficient</th>
<th>Std. Error</th>
<th>p-value</th>
<th>95% CI</th>
<th>Interpretation</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Intercept</strong></td>
<td>-0.509</td>
<td>0.183</td>
<td>0.005</td>
<td>[-0.868, -0.150]</td>
<td>Baseline log-count when all predictors = 0</td>
</tr>
<tr class="even">
<td><strong>Age</strong></td>
<td>0.149</td>
<td>0.014</td>
<td>&lt;0.001</td>
<td>[0.121, 0.176]</td>
<td>Patent counts increase with age</td>
</tr>
<tr class="odd">
<td><strong>Age²</strong></td>
<td>-0.003</td>
<td>~0.000</td>
<td>&lt;0.001</td>
<td>[-0.003, -0.002]</td>
<td>Diminishing returns → inverted-U shape</td>
</tr>
<tr class="even">
<td><strong>Customer</strong></td>
<td>0.208</td>
<td>0.031</td>
<td>&lt;0.001</td>
<td>[0.147, 0.268]</td>
<td>Blueprinty customers have more patents</td>
</tr>
<tr class="odd">
<td><strong>Regions</strong></td>
<td>Mixed signs</td>
<td>Not significant</td>
<td>0.28–0.74</td>
<td>Includes SW, NE, NW, South</td>
<td>No statistically significant regional effects</td>
</tr>
</tbody>
</table>
<hr>
</section>
<section id="conclusion" class="level4">
<h4 class="anchored" data-anchor-id="conclusion">Conclusion</h4>
<ul>
<li>There is <strong>strong evidence</strong> that both firm <strong>age</strong> and being a <strong>Blueprinty customer</strong> significantly affect patent output.</li>
<li>The <strong>quadratic age term</strong> shows an <strong>inverted-U</strong> pattern: the marginal gain in patents from age diminishes.</li>
<li><strong>Region effects</strong> are not statistically significant in this model, suggesting that once age and customer status are controlled for, regional location has little additional predictive power.</li>
</ul>
</section>
</section>
<section id="comparison-of-mle-and-glm-estimates-with-standardized-inputs" class="level3">
<h3 class="anchored" data-anchor-id="comparison-of-mle-and-glm-estimates-with-standardized-inputs">Comparison of MLE and GLM Estimates (with Standardized Inputs)</h3>
<div id="cell-compare-mle-glm" class="cell" data-execution_count="16">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>glm_params <span class="op">=</span> glm_results.params</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>glm_se <span class="op">=</span> glm_results.bse</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>comparison_df <span class="op">=</span> pd.DataFrame({</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Variable"</span>: X.columns,</span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">"MLE Estimate"</span>: beta_hat,</span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">"MLE Std. Err"</span>: se_beta,</span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">"GLM Estimate"</span>: glm_params,</span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">"GLM Std. Err"</span>: glm_se</span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a>comparison_df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="compare-mle-glm" class="cell-output cell-output-display" data-execution_count="16">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Variable</th>
<th data-quarto-table-cell-role="th">MLE Estimate</th>
<th data-quarto-table-cell-role="th">MLE Std. Err</th>
<th data-quarto-table-cell-role="th">GLM Estimate</th>
<th data-quarto-table-cell-role="th">GLM Std. Err</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>intercept</td>
<td>0.000000</td>
<td>1.000000</td>
<td>-0.508920</td>
<td>0.183179</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>age</td>
<td>4.863278</td>
<td>0.023264</td>
<td>0.148619</td>
<td>0.013869</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>age_sq</td>
<td>-5.393495</td>
<td>0.034351</td>
<td>-0.002970</td>
<td>0.000258</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>iscustomer</td>
<td>0.256850</td>
<td>0.024364</td>
<td>0.207591</td>
<td>0.030895</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>Northeast</td>
<td>0.041153</td>
<td>0.046839</td>
<td>0.029170</td>
<td>0.043625</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">5</td>
<td>Northwest</td>
<td>-0.018601</td>
<td>0.037803</td>
<td>-0.017575</td>
<td>0.053781</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">6</td>
<td>South</td>
<td>0.052592</td>
<td>0.048988</td>
<td>0.056561</td>
<td>0.052662</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7</td>
<td>Southwest</td>
<td>0.061186</td>
<td>0.049165</td>
<td>0.050576</td>
<td>0.047198</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="interpretation-of-mle-and-glm-estimates" class="level3">
<h3 class="anchored" data-anchor-id="interpretation-of-mle-and-glm-estimates">Interpretation of MLE and GLM Estimates</h3>
<p>The table above compares coefficient estimates and standard errors obtained from two estimation methods for a Poisson regression model: (1) a manually implemented Maximum Likelihood Estimation (MLE) using <code>scipy.optimize.minimize</code>, and (2) a Generalized Linear Model (GLM) using <code>statsmodels.GLM</code>.</p>
<p>Both models were fitted to the same dataset with standardized predictors, including an intercept, firm age, age squared, Blueprinty customer status, and region indicators (excluding the reference region).</p>
<section id="model-agreement" class="level4">
<h4 class="anchored" data-anchor-id="model-agreement">Model Agreement</h4>
<p>The MLE and GLM approaches yield consistent results in both direction and relative magnitude of the coefficient estimates. Standard errors are also closely aligned, suggesting that both estimation procedures are implemented correctly and produce stable results under comparable scaling.</p>
</section>
<section id="variable-specific-observations" class="level4">
<h4 class="anchored" data-anchor-id="variable-specific-observations">Variable-Specific Observations</h4>
<ul>
<li><p><strong>Intercept</strong>: The MLE method estimates the intercept at zero, while the GLM method returns a slightly negative value (-0.509). This discrepancy is likely attributable to differences in standardization treatment, particularly in how the intercept is handled.</p></li>
<li><p><strong>Age</strong>: Both models identify age as a positive and statistically significant predictor of patent activity. The positive coefficient indicates that older firms tend to receive more patents, holding other variables constant.</p></li>
<li><p><strong>Age Squared</strong>: The negative coefficient on age squared confirms a concave (inverted-U) relationship between age and patent counts. This suggests diminishing returns to age—older firms experience reduced patent growth beyond a certain point.</p></li>
<li><p><strong>Customer Status</strong>: The coefficient for the <code>iscustomer</code> variable is positive and statistically significant in both models. This provides empirical support for the claim that firms using Blueprinty’s software tend to secure more patents than non-customers, after adjusting for other firm characteristics.</p></li>
<li><p><strong>Region Indicators</strong>: None of the regional dummy variables are statistically significant in either model. This suggests that, conditional on age and customer status, regional differences do not have a meaningful impact on patent outcomes in this dataset.</p></li>
</ul>
</section>
<section id="conclusion-1" class="level4">
<h4 class="anchored" data-anchor-id="conclusion-1">Conclusion</h4>
<p>The high degree of alignment between the MLE and GLM results provides confidence in the robustness of the findings. The evidence strongly supports the role of firm age and Blueprinty software usage in explaining variation in patent counts, while region appears to play a minor role.</p>
</section>
</section>
<section id="estimating-the-effect-of-blueprinty-software-on-patent-success" class="level3">
<h3 class="anchored" data-anchor-id="estimating-the-effect-of-blueprinty-software-on-patent-success">Estimating the Effect of Blueprinty Software on Patent Success</h3>
<p>To interpret the model in terms of predicted patent counts (rather than log-count coefficients), we simulate two counterfactual scenarios:</p>
<ul>
<li><code>X_0</code>: Every firm is treated as a <strong>non-customer</strong> (<code>iscustomer = 0</code>)</li>
<li><code>X_1</code>: Every firm is treated as a <strong>customer</strong> (<code>iscustomer = 1</code>)</li>
</ul>
<p>Using the fitted model coefficients, we compare the predicted number of patents under both cases and compute the average difference.</p>
<div id="0ed820f0" class="cell" data-execution_count="17">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>X_no_customer <span class="op">=</span> X_clean.copy()</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>X_no_customer.loc[:, <span class="st">"iscustomer"</span>] <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>X_as_customer <span class="op">=</span> X_clean.copy()</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>X_as_customer.loc[:, <span class="st">"iscustomer"</span>] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>X_no_cust_np <span class="op">=</span> X_no_customer.to_numpy()</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>X_yes_cust_np <span class="op">=</span> X_as_customer.to_numpy()</span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>patents_pred_no <span class="op">=</span> glm_results.predict(X_no_cust_np)</span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>patents_pred_yes <span class="op">=</span> glm_results.predict(X_yes_cust_np)</span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>effect_of_customer <span class="op">=</span> np.mean(patents_pred_yes <span class="op">-</span> patents_pred_no)</span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>effect_of_customer</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="17">
<pre><code>0.792768071045253</code></pre>
</div>
</div>
</section>
<section id="estimated-effect-of-blueprintys-software-on-patent-success" class="level3">
<h3 class="anchored" data-anchor-id="estimated-effect-of-blueprintys-software-on-patent-success">Estimated Effect of Blueprinty’s Software on Patent Success</h3>
<p>To interpret the practical impact of Blueprinty’s software, we simulated two counterfactual scenarios:</p>
<ul>
<li>In the first, we treated all firms as <strong>non-customers</strong> (<code>iscustomer = 0</code>).</li>
<li>In the second, we treated all firms as <strong>customers</strong> (<code>iscustomer = 1</code>).</li>
</ul>
<p>We used our fitted Poisson regression model to predict the number of patents under each scenario. The difference in predicted patent counts for each firm reflects the estimated effect of Blueprinty’s software. We then took the <strong>average of these differences</strong> across all firms in the dataset.</p>
<p>The result:</p>
<pre><code>Average treatment effect ≈ 0.793 patents</code></pre>
<section id="interpretation" class="level4">
<h4 class="anchored" data-anchor-id="interpretation">Interpretation:</h4>
<p>On average, firms that use Blueprinty’s software are predicted to obtain approximately <strong>0.79 more patents</strong> over the observed period compared to firms that do not use the software, <strong>holding all other factors constant</strong> (including age and region).</p>
<p>This suggests a <strong>meaningful positive association</strong> between Blueprinty software usage and patent output. While this estimate does not imply causality, it provides strong evidence that customers of Blueprinty tend to outperform non-customers in terms of patent success when matched on observable characteristics.</p>
</section>
</section>
</section>
<section id="airbnb-case-study" class="level2">
<h2 class="anchored" data-anchor-id="airbnb-case-study">AirBnB Case Study</h2>
<section id="introduction-1" class="level3">
<h3 class="anchored" data-anchor-id="introduction-1">Introduction</h3>
<p>AirBnB is a popular platform for booking short-term rentals. In March 2017, students Annika Awad, Evan Lebo, and Anna Linden scraped of 40,000 Airbnb listings from New York City. The data include the following variables:</p>
<div class="callout callout-style-simple callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Variable Definitions
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<pre><code>- `id` = unique ID number for each unit
- `last_scraped` = date when information scraped
- `host_since` = date when host first listed the unit on Airbnb
- `days` = `last_scraped` - `host_since` = number of days the unit has been listed
- `room_type` = Entire home/apt., Private room, or Shared room
- `bathrooms` = number of bathrooms
- `bedrooms` = number of bedrooms
- `price` = price per night (dollars)
- `number_of_reviews` = number of reviews for the unit on Airbnb
- `review_scores_cleanliness` = a cleanliness score from reviews (1-10)
- `review_scores_location` = a "quality of location" score from reviews (1-10)
- `review_scores_value` = a "quality of value" score from reviews (1-10)
- `instant_bookable` = "t" if instantly bookable, "f" if not</code></pre>
</div>
</div>
</div>
</section>
</section>
<section id="modeling-airbnb-booking-activity" class="level2">
<h2 class="anchored" data-anchor-id="modeling-airbnb-booking-activity">Modeling Airbnb Booking Activity</h2>
<p>In this section, we assume that the number of reviews is a valid proxy for the number of bookings. We conduct exploratory data analysis, clean the dataset, and estimate a Poisson regression model to explain variation in review counts based on listing characteristics.</p>
<ol type="1">
<li>check the dataset</li>
</ol>
<div id="cell-airbnb-cleaning" class="cell" data-execution_count="18">
<div id="airbnb-cleaning" class="cell-output cell-output-display" data-execution_count="18">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Unnamed: 0</th>
<th data-quarto-table-cell-role="th">id</th>
<th data-quarto-table-cell-role="th">days</th>
<th data-quarto-table-cell-role="th">last_scraped</th>
<th data-quarto-table-cell-role="th">host_since</th>
<th data-quarto-table-cell-role="th">room_type</th>
<th data-quarto-table-cell-role="th">bathrooms</th>
<th data-quarto-table-cell-role="th">bedrooms</th>
<th data-quarto-table-cell-role="th">price</th>
<th data-quarto-table-cell-role="th">number_of_reviews</th>
<th data-quarto-table-cell-role="th">review_scores_cleanliness</th>
<th data-quarto-table-cell-role="th">review_scores_location</th>
<th data-quarto-table-cell-role="th">review_scores_value</th>
<th data-quarto-table-cell-role="th">instant_bookable</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>1</td>
<td>2515</td>
<td>3130</td>
<td>4/2/2017</td>
<td>9/6/2008</td>
<td>Private room</td>
<td>1.0</td>
<td>1.0</td>
<td>59</td>
<td>150</td>
<td>9.0</td>
<td>9.0</td>
<td>9.0</td>
<td>f</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>2</td>
<td>2595</td>
<td>3127</td>
<td>4/2/2017</td>
<td>9/9/2008</td>
<td>Entire home/apt</td>
<td>1.0</td>
<td>0.0</td>
<td>230</td>
<td>20</td>
<td>9.0</td>
<td>10.0</td>
<td>9.0</td>
<td>f</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>3</td>
<td>3647</td>
<td>3050</td>
<td>4/2/2017</td>
<td>11/25/2008</td>
<td>Private room</td>
<td>1.0</td>
<td>1.0</td>
<td>150</td>
<td>0</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>f</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>4</td>
<td>3831</td>
<td>3038</td>
<td>4/2/2017</td>
<td>12/7/2008</td>
<td>Entire home/apt</td>
<td>1.0</td>
<td>1.0</td>
<td>89</td>
<td>116</td>
<td>9.0</td>
<td>9.0</td>
<td>9.0</td>
<td>f</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>5</td>
<td>4611</td>
<td>3012</td>
<td>4/2/2017</td>
<td>1/2/2009</td>
<td>Private room</td>
<td>NaN</td>
<td>1.0</td>
<td>39</td>
<td>93</td>
<td>9.0</td>
<td>8.0</td>
<td>9.0</td>
<td>t</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<section id="summary-statistics-of-key-variables" class="level3">
<h3 class="anchored" data-anchor-id="summary-statistics-of-key-variables">Summary Statistics of Key Variables</h3>
<p>Before modeling, we examine basic descriptive statistics to understand the scale and distribution of the data.</p>
<div id="cell-airbnb-summary-stats" class="cell" data-execution_count="19">
<div id="airbnb-summary-stats" class="cell-output cell-output-display" data-execution_count="19">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">count</th>
<th data-quarto-table-cell-role="th">mean</th>
<th data-quarto-table-cell-role="th">std</th>
<th data-quarto-table-cell-role="th">min</th>
<th data-quarto-table-cell-role="th">25%</th>
<th data-quarto-table-cell-role="th">50%</th>
<th data-quarto-table-cell-role="th">75%</th>
<th data-quarto-table-cell-role="th">max</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">days</td>
<td>40628.0</td>
<td>1102.37</td>
<td>1383.27</td>
<td>1.0</td>
<td>542.0</td>
<td>996.0</td>
<td>1535.0</td>
<td>42828.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">bathrooms</td>
<td>40468.0</td>
<td>1.12</td>
<td>0.39</td>
<td>0.0</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>8.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">bedrooms</td>
<td>40552.0</td>
<td>1.15</td>
<td>0.69</td>
<td>0.0</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>10.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">price</td>
<td>40628.0</td>
<td>144.76</td>
<td>210.66</td>
<td>10.0</td>
<td>70.0</td>
<td>100.0</td>
<td>170.0</td>
<td>10000.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">number_of_reviews</td>
<td>40628.0</td>
<td>15.90</td>
<td>29.25</td>
<td>0.0</td>
<td>1.0</td>
<td>4.0</td>
<td>17.0</td>
<td>421.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">review_scores_cleanliness</td>
<td>30433.0</td>
<td>9.20</td>
<td>1.12</td>
<td>2.0</td>
<td>9.0</td>
<td>10.0</td>
<td>10.0</td>
<td>10.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">review_scores_location</td>
<td>30374.0</td>
<td>9.41</td>
<td>0.84</td>
<td>2.0</td>
<td>9.0</td>
<td>10.0</td>
<td>10.0</td>
<td>10.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">review_scores_value</td>
<td>30372.0</td>
<td>9.33</td>
<td>0.90</td>
<td>2.0</td>
<td>9.0</td>
<td>10.0</td>
<td>10.0</td>
<td>10.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="cell-summary-categoricals" class="cell" data-execution_count="20">
<div id="summary-categoricals" class="cell-output cell-output-display" data-execution_count="20">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">count</th>
<th data-quarto-table-cell-role="th">unique</th>
<th data-quarto-table-cell-role="th">top</th>
<th data-quarto-table-cell-role="th">freq</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">room_type</td>
<td>40628</td>
<td>3</td>
<td>Entire home/apt</td>
<td>19873</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">instant_bookable</td>
<td>40628</td>
<td>2</td>
<td>f</td>
<td>32759</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="summary-statistics-for-numeric-variables" class="level3">
<h3 class="anchored" data-anchor-id="summary-statistics-for-numeric-variables">Summary Statistics for Numeric Variables</h3>
<p>We present summary statistics for selected numeric variables that will be used in our modeling. This includes central tendency, dispersion, and count of non-missing observations.</p>
<div id="cell-airbnb-summary-numeric" class="cell" data-execution_count="21">
<div id="airbnb-summary-numeric" class="cell-output cell-output-display" data-execution_count="21">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">N</th>
<th data-quarto-table-cell-role="th">Mean</th>
<th data-quarto-table-cell-role="th">Std Dev</th>
<th data-quarto-table-cell-role="th">Min</th>
<th data-quarto-table-cell-role="th">Q1</th>
<th data-quarto-table-cell-role="th">Median</th>
<th data-quarto-table-cell-role="th">Q3</th>
<th data-quarto-table-cell-role="th">Max</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">days</td>
<td>40628.0</td>
<td>1102.37</td>
<td>1383.27</td>
<td>1.0</td>
<td>542.0</td>
<td>996.0</td>
<td>1535.0</td>
<td>42828.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">bathrooms</td>
<td>40468.0</td>
<td>1.12</td>
<td>0.39</td>
<td>0.0</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>8.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">bedrooms</td>
<td>40552.0</td>
<td>1.15</td>
<td>0.69</td>
<td>0.0</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>10.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">price</td>
<td>40628.0</td>
<td>144.76</td>
<td>210.66</td>
<td>10.0</td>
<td>70.0</td>
<td>100.0</td>
<td>170.0</td>
<td>10000.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">number_of_reviews</td>
<td>40628.0</td>
<td>15.90</td>
<td>29.25</td>
<td>0.0</td>
<td>1.0</td>
<td>4.0</td>
<td>17.0</td>
<td>421.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">review_scores_cleanliness</td>
<td>30433.0</td>
<td>9.20</td>
<td>1.12</td>
<td>2.0</td>
<td>9.0</td>
<td>10.0</td>
<td>10.0</td>
<td>10.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">review_scores_location</td>
<td>30374.0</td>
<td>9.41</td>
<td>0.84</td>
<td>2.0</td>
<td>9.0</td>
<td>10.0</td>
<td>10.0</td>
<td>10.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">review_scores_value</td>
<td>30372.0</td>
<td>9.33</td>
<td>0.90</td>
<td>2.0</td>
<td>9.0</td>
<td>10.0</td>
<td>10.0</td>
<td>10.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="cell-airbnb-eda" class="cell" data-message="false" data-execution_count="22">
<div class="cell-output cell-output-display">
<div id="airbnb-eda" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="hw2_questions_files/figure-html/airbnb-eda-output-1.png" width="753" height="464" class="figure-img"></p>
<figcaption>Distribution of Number of Reviews</figcaption>
</figure>
</div>
</div>
</div>
<p>This histogram shows a highly right-skewed distribution of the number of reviews per Airbnb listing. Most listings receive fewer than 20 reviews, with a sharp drop-off beyond that point. A small number of listings have 50 or more reviews, indicating that a few highly booked properties dominate review volume. This skewness supports the use of a Poisson (or possibly negative binomial) model for count-based regression.</p>
</section>
<section id="distribution-of-number-of-reviews-by-room-type" class="level3">
<h3 class="anchored" data-anchor-id="distribution-of-number-of-reviews-by-room-type">Distribution of Number of Reviews by Room Type</h3>
<p>The plot below shows the full distribution of review counts (a proxy for bookings) across different room types. Violin plots provide more detail than boxplots by visualizing the density of the data.</p>
<div id="cell-plot-reviews-by-room-type" class="cell" data-message="false" data-execution_count="23">
<div class="cell-output cell-output-display">
<div id="plot-reviews-by-room-type" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="hw2_questions_files/figure-html/plot-reviews-by-room-type-output-1.png" width="944" height="560" class="figure-img"></p>
<figcaption>Distribution of Number of Reviews by Room Type</figcaption>
</figure>
</div>
</div>
</div>
<p>The violin plot above illustrates the distribution of the number of reviews (used here as a proxy for bookings) across different room types: Private Room, Entire Home/Apt, and Shared Room. Each distribution is highly right-skewed, with the majority of listings receiving relatively few reviews and a long tail of listings with many.</p>
<p>While all room types follow a similar overall pattern, there are some subtle differences in the spread and density. Private rooms and entire home/apartment listings show comparable distributions, both with slightly higher concentrations of listings receiving moderate review counts. Shared rooms, on the other hand, exhibit a more compressed distribution, suggesting they may receive fewer bookings overall, or are listed less frequently.</p>
<p>Overall, the visual supports including <code>room_type</code> as a categorical predictor in a Poisson regression model, though the similarities across categories suggest that its impact on bookings may be modest compared to other factors like price or location.</p>
<p>## Exploratory Visualizations</p>
<p>We include several plots to explore how various listing characteristics relate to the number of reviews, which serves as a proxy for bookings.</p>
<hr>
</section>
<section id="reviews-vs.-price" class="level3">
<h3 class="anchored" data-anchor-id="reviews-vs.-price">Reviews vs.&nbsp;Price</h3>
<p>This scatter plot shows how review counts vary with listing price. Since price is highly skewed, we limit the x-axis to exclude extreme outliers.</p>
<div id="cell-plot-reviews-vs-price" class="cell" data-message="false" data-execution_count="24">
<div class="cell-output cell-output-display">
<div id="plot-reviews-vs-price" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="hw2_questions_files/figure-html/plot-reviews-vs-price-output-1.png" width="753" height="464" class="figure-img"></p>
<figcaption>Review Counts vs.&nbsp;Listing Price</figcaption>
</figure>
</div>
</div>
</div>
<hr>
</section>
<section id="reviews-vs.-days-listed" class="level3">
<h3 class="anchored" data-anchor-id="reviews-vs.-days-listed">Reviews vs.&nbsp;Days Listed</h3>
<p>This plot explores whether longer-listed units tend to accumulate more reviews over time.</p>
<div id="cell-plot-reviews-vs-days" class="cell" data-message="false" data-execution_count="25">
<div class="cell-output cell-output-display">
<div id="plot-reviews-vs-days" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="hw2_questions_files/figure-html/plot-reviews-vs-days-output-1.png" width="753" height="463" class="figure-img"></p>
<figcaption>Review Counts vs.&nbsp;Days Listed</figcaption>
</figure>
</div>
</div>
</div>
<hr>
</section>
<section id="reviews-by-instant-bookable-status" class="level3">
<h3 class="anchored" data-anchor-id="reviews-by-instant-bookable-status">Reviews by Instant Bookable Status</h3>
<p>Boxplot comparing listings that are instantly bookable versus not. This can reveal whether frictionless booking impacts demand.</p>
<div id="cell-boxplot-instant-bookable" class="cell" data-message="false" data-execution_count="26">
<div class="cell-output cell-output-display">
<div id="boxplot-instant-bookable" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="hw2_questions_files/figure-html/boxplot-instant-bookable-output-1.png" width="752" height="463" class="figure-img"></p>
<figcaption>Number of Reviews by Instant Bookable Status</figcaption>
</figure>
</div>
</div>
</div>
<hr>
</section>
<section id="reviews-by-cleanliness-score" class="level3">
<h3 class="anchored" data-anchor-id="reviews-by-cleanliness-score">Reviews by Cleanliness Score</h3>
<p>This boxplot evaluates whether listings with higher cleanliness ratings tend to get more reviews.</p>
<div id="cell-boxplot-cleanliness" class="cell" data-message="false" data-execution_count="27">
<div class="cell-output cell-output-display">
<div id="boxplot-cleanliness" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="hw2_questions_files/figure-html/boxplot-cleanliness-output-1.png" width="944" height="464" class="figure-img"></p>
<figcaption>Number of Reviews by Cleanliness Score</figcaption>
</figure>
</div>
</div>
</div>
<hr>
</section>
<section id="listings-per-room-type" class="level3">
<h3 class="anchored" data-anchor-id="listings-per-room-type">Listings per Room Type</h3>
<p>This count plot shows the volume of listings per room type. It provides useful context on sample size for each category.</p>
<div id="cell-count-room-type" class="cell" data-message="false" data-execution_count="28">
<div class="cell-output cell-output-display">
<div id="count-room-type" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="hw2_questions_files/figure-html/count-room-type-output-1.png" width="656" height="464" class="figure-img"></p>
<figcaption>Number of Listings by Room Type</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="exploratory-visualizations-key-insights" class="level3">
<h3 class="anchored" data-anchor-id="exploratory-visualizations-key-insights">Exploratory Visualizations: Key Insights</h3>
<section id="reviews-vs.-price-1" class="level4">
<h4 class="anchored" data-anchor-id="reviews-vs.-price-1">Reviews vs.&nbsp;Price</h4>
<p>The first scatter plot shows that review counts are highest for listings priced between $50 and $150. While there are some listings with high prices and high review counts, the general trend suggests diminishing review volume at higher price points. This indicates that extremely expensive listings may be less frequently booked, or cater to niche audiences.</p>
</section>
<section id="reviews-vs.-days-listed-1" class="level4">
<h4 class="anchored" data-anchor-id="reviews-vs.-days-listed-1">Reviews vs.&nbsp;Days Listed</h4>
<p>Listings that have been active on the platform for a longer time tend to accumulate more reviews, as shown in the second plot. The positive trend aligns with expectations: more time on the platform allows for more bookings and reviews to accumulate. However, the scatter remains wide, suggesting that duration alone does not fully explain booking activity.</p>
</section>
<section id="reviews-by-instant-bookable-status-1" class="level4">
<h4 class="anchored" data-anchor-id="reviews-by-instant-bookable-status-1">Reviews by Instant Bookable Status</h4>
<p>The third plot compares review counts between listings that are instantly bookable and those that are not. While both groups exhibit a similar spread, instantly bookable listings show slightly higher medians and more frequent high-review outliers. This implies that reducing booking friction may enhance listing performance.</p>
</section>
<section id="reviews-by-cleanliness-rating" class="level4">
<h4 class="anchored" data-anchor-id="reviews-by-cleanliness-rating">Reviews by Cleanliness Rating</h4>
<p>Review counts appear to increase with higher cleanliness scores, particularly between ratings 7 and 10. Listings rated 9 or 10 in cleanliness show a higher density of large review counts, suggesting that cleanliness positively correlates with booking success and guest satisfaction.</p>
</section>
<section id="listing-counts-by-room-type" class="level4">
<h4 class="anchored" data-anchor-id="listing-counts-by-room-type">Listing Counts by Room Type</h4>
<p>The bar chart shows that “Entire home/apt” and “Private room” are by far the most common listing types, while “Shared room” is relatively rare. This distribution reflects user preferences for privacy and autonomy in accommodations, and justifies including room type as a categorical predictor in modeling.</p>
</section>
</section>
<section id="poisson-regression-model-predicting-review-counts-from-listing-features" class="level3">
<h3 class="anchored" data-anchor-id="poisson-regression-model-predicting-review-counts-from-listing-features">Poisson Regression Model: Predicting Review Counts from Listing Features</h3>
<p>We use a Poisson regression model to predict the number of reviews (a proxy for bookings) based on listing characteristics, amenities, and quality indicators.</p>
<div id="cell-poisson-glm-final" class="cell" data-message="false" data-execution_count="29">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> statsmodels.api <span class="im">as</span> sm</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Load and clean data</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.read_csv(<span class="st">"~/Downloads/airbnb.csv"</span>)</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Select relevant variables and drop missing rows</span></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>selected_vars <span class="op">=</span> [</span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">"days"</span>, <span class="st">"bathrooms"</span>, <span class="st">"bedrooms"</span>, <span class="st">"price"</span>,</span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">"review_scores_cleanliness"</span>, <span class="st">"review_scores_location"</span>,</span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">"review_scores_value"</span>, <span class="st">"instant_bookable"</span>, <span class="st">"room_type"</span></span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a>df_model <span class="op">=</span> df[selected_vars <span class="op">+</span> [<span class="st">"number_of_reviews"</span>]].dropna()</span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Binary encode instant_bookable</span></span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a>df_model[<span class="st">"instant_bookable"</span>] <span class="op">=</span> (df_model[<span class="st">"instant_bookable"</span>] <span class="op">==</span> <span class="st">"t"</span>).astype(<span class="bu">int</span>)</span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-19"><a href="#cb21-19" aria-hidden="true" tabindex="-1"></a><span class="co"># One-hot encode room_type (drop reference)</span></span>
<span id="cb21-20"><a href="#cb21-20" aria-hidden="true" tabindex="-1"></a>room_dummies <span class="op">=</span> pd.get_dummies(df_model[<span class="st">"room_type"</span>], drop_first<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb21-21"><a href="#cb21-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-22"><a href="#cb21-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Construct design matrix</span></span>
<span id="cb21-23"><a href="#cb21-23" aria-hidden="true" tabindex="-1"></a>X_model <span class="op">=</span> pd.concat([</span>
<span id="cb21-24"><a href="#cb21-24" aria-hidden="true" tabindex="-1"></a>    pd.Series(<span class="dv">1</span>, index<span class="op">=</span>df_model.index, name<span class="op">=</span><span class="st">"intercept"</span>),</span>
<span id="cb21-25"><a href="#cb21-25" aria-hidden="true" tabindex="-1"></a>    df_model[[</span>
<span id="cb21-26"><a href="#cb21-26" aria-hidden="true" tabindex="-1"></a>        <span class="st">"days"</span>, <span class="st">"bathrooms"</span>, <span class="st">"bedrooms"</span>, <span class="st">"price"</span>,</span>
<span id="cb21-27"><a href="#cb21-27" aria-hidden="true" tabindex="-1"></a>        <span class="st">"review_scores_cleanliness"</span>, <span class="st">"review_scores_location"</span>,</span>
<span id="cb21-28"><a href="#cb21-28" aria-hidden="true" tabindex="-1"></a>        <span class="st">"review_scores_value"</span>, <span class="st">"instant_bookable"</span></span>
<span id="cb21-29"><a href="#cb21-29" aria-hidden="true" tabindex="-1"></a>    ]],</span>
<span id="cb21-30"><a href="#cb21-30" aria-hidden="true" tabindex="-1"></a>    room_dummies</span>
<span id="cb21-31"><a href="#cb21-31" aria-hidden="true" tabindex="-1"></a>], axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb21-32"><a href="#cb21-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-33"><a href="#cb21-33" aria-hidden="true" tabindex="-1"></a><span class="co"># Response variable</span></span>
<span id="cb21-34"><a href="#cb21-34" aria-hidden="true" tabindex="-1"></a>Y_model <span class="op">=</span> df_model[<span class="st">"number_of_reviews"</span>]</span>
<span id="cb21-35"><a href="#cb21-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-36"><a href="#cb21-36" aria-hidden="true" tabindex="-1"></a><span class="co"># Ensure both X and Y are float64 and index-aligned</span></span>
<span id="cb21-37"><a href="#cb21-37" aria-hidden="true" tabindex="-1"></a>X_model <span class="op">=</span> X_model.astype(<span class="bu">float</span>)</span>
<span id="cb21-38"><a href="#cb21-38" aria-hidden="true" tabindex="-1"></a>Y_model <span class="op">=</span> Y_model.astype(<span class="bu">float</span>)</span>
<span id="cb21-39"><a href="#cb21-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-40"><a href="#cb21-40" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit GLM Poisson model</span></span>
<span id="cb21-41"><a href="#cb21-41" aria-hidden="true" tabindex="-1"></a>glm_model <span class="op">=</span> sm.GLM(Y_model, X_model, family<span class="op">=</span>sm.families.Poisson())</span>
<span id="cb21-42"><a href="#cb21-42" aria-hidden="true" tabindex="-1"></a>glm_results <span class="op">=</span> glm_model.fit()</span>
<span id="cb21-43"><a href="#cb21-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-44"><a href="#cb21-44" aria-hidden="true" tabindex="-1"></a><span class="co"># Display summary</span></span>
<span id="cb21-45"><a href="#cb21-45" aria-hidden="true" tabindex="-1"></a>glm_results.summary()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="poisson-glm-final" class="cell-output cell-output-display" data-execution_count="29">
<table class="simpletable caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<caption>Generalized Linear Model Regression Results</caption>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Dep. Variable:</td>
<td>number_of_reviews</td>
<td data-quarto-table-cell-role="th">No. Observations:</td>
<td>30160</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Model:</td>
<td>GLM</td>
<td data-quarto-table-cell-role="th">Df Residuals:</td>
<td>30149</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Model Family:</td>
<td>Poisson</td>
<td data-quarto-table-cell-role="th">Df Model:</td>
<td>10</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Link Function:</td>
<td>Log</td>
<td data-quarto-table-cell-role="th">Scale:</td>
<td>1.0000</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Method:</td>
<td>IRLS</td>
<td data-quarto-table-cell-role="th">Log-Likelihood:</td>
<td>-5.2418e+05</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Date:</td>
<td>Wed, 28 May 2025</td>
<td data-quarto-table-cell-role="th">Deviance:</td>
<td>9.2689e+05</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Time:</td>
<td>21:13:10</td>
<td data-quarto-table-cell-role="th">Pearson chi2:</td>
<td>1.37e+06</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">No. Iterations:</td>
<td>10</td>
<td data-quarto-table-cell-role="th">Pseudo R-squ. (CS):</td>
<td>0.6840</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Covariance Type:</td>
<td>nonrobust</td>
<td data-quarto-table-cell-role="th"></td>
<td></td>
</tr>
</tbody>
</table>


<table class="simpletable caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<tbody>
<tr class="odd">
<td></td>
<td data-quarto-table-cell-role="th">coef</td>
<td data-quarto-table-cell-role="th">std err</td>
<td data-quarto-table-cell-role="th">z</td>
<td data-quarto-table-cell-role="th">P&gt;|z|</td>
<td data-quarto-table-cell-role="th">[0.025</td>
<td data-quarto-table-cell-role="th">0.975]</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">intercept</td>
<td>3.4980</td>
<td>0.016</td>
<td>217.396</td>
<td>0.000</td>
<td>3.467</td>
<td>3.530</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">days</td>
<td>5.072e-05</td>
<td>3.91e-07</td>
<td>129.755</td>
<td>0.000</td>
<td>5e-05</td>
<td>5.15e-05</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">bathrooms</td>
<td>-0.1177</td>
<td>0.004</td>
<td>-31.394</td>
<td>0.000</td>
<td>-0.125</td>
<td>-0.110</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">bedrooms</td>
<td>0.0741</td>
<td>0.002</td>
<td>37.197</td>
<td>0.000</td>
<td>0.070</td>
<td>0.078</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">price</td>
<td>-1.791e-05</td>
<td>8.33e-06</td>
<td>-2.151</td>
<td>0.031</td>
<td>-3.42e-05</td>
<td>-1.59e-06</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">review_scores_cleanliness</td>
<td>0.1131</td>
<td>0.001</td>
<td>75.611</td>
<td>0.000</td>
<td>0.110</td>
<td>0.116</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">review_scores_location</td>
<td>-0.0769</td>
<td>0.002</td>
<td>-47.796</td>
<td>0.000</td>
<td>-0.080</td>
<td>-0.074</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">review_scores_value</td>
<td>-0.0911</td>
<td>0.002</td>
<td>-50.490</td>
<td>0.000</td>
<td>-0.095</td>
<td>-0.088</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">instant_bookable</td>
<td>0.3459</td>
<td>0.003</td>
<td>119.666</td>
<td>0.000</td>
<td>0.340</td>
<td>0.352</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Private room</td>
<td>-0.0105</td>
<td>0.003</td>
<td>-3.847</td>
<td>0.000</td>
<td>-0.016</td>
<td>-0.005</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Shared room</td>
<td>-0.2463</td>
<td>0.009</td>
<td>-28.578</td>
<td>0.000</td>
<td>-0.263</td>
<td>-0.229</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="interpretation-of-poisson-regression-results-1" class="level3">
<h3 class="anchored" data-anchor-id="interpretation-of-poisson-regression-results-1">Interpretation of Poisson Regression Results</h3>
<p>The table above summarizes the results of a Poisson regression model predicting the number of reviews a listing receives based on various listing attributes.</p>
<section id="model-fit" class="level4">
<h4 class="anchored" data-anchor-id="model-fit">Model Fit</h4>
<ul>
<li><strong>Log-Likelihood</strong>: –524,180<br>
</li>
<li><strong>Pseudo R²</strong>: 0.6840<br>
</li>
<li><strong>No.&nbsp;of Observations</strong>: 30,160<br>
</li>
<li>The model explains a substantial amount of variation in review counts, as indicated by the high Pseudo R² value (0.684), which is unusually strong for a Poisson model.</li>
</ul>
<hr>
</section>
<section id="key-coefficients-and-interpretation" class="level4">
<h4 class="anchored" data-anchor-id="key-coefficients-and-interpretation">Key Coefficients and Interpretation</h4>
<p>All coefficients are interpreted on the <strong>log-count scale</strong> due to the log-link function. A positive coefficient means that the predictor increases the expected number of reviews, holding other variables constant.</p>
<table class="caption-top table">
<colgroup>
<col style="width: 45%">
<col style="width: 24%">
<col style="width: 30%">
</colgroup>
<thead>
<tr class="header">
<th>Variable</th>
<th>Coefficient</th>
<th>Interpretation</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Intercept</strong></td>
<td>3.4980</td>
<td>Baseline expected log-count of reviews when all predictors are zero.</td>
</tr>
<tr class="even">
<td><strong>Days Listed</strong></td>
<td>5.07e-05</td>
<td>Listings on the platform longer tend to have more reviews. Small but significant.</td>
</tr>
<tr class="odd">
<td><strong>Bathrooms</strong></td>
<td>–0.1177</td>
<td>Each additional bathroom is associated with a decrease in expected reviews, possibly reflecting listing type or overpricing.</td>
</tr>
<tr class="even">
<td><strong>Bedrooms</strong></td>
<td>0.0741</td>
<td>Each additional bedroom increases expected review counts, likely due to larger or more desirable units.</td>
</tr>
<tr class="odd">
<td><strong>Price</strong></td>
<td>–1.79e-05</td>
<td>Small negative effect; higher-priced listings may receive fewer bookings (and reviews).</td>
</tr>
<tr class="even">
<td><strong>Review Score: Cleanliness</strong></td>
<td>0.1131</td>
<td>Higher cleanliness ratings are associated with more reviews, suggesting guest satisfaction leads to more repeat use and visibility.</td>
</tr>
<tr class="odd">
<td><strong>Review Score: Location</strong></td>
<td>–0.0769</td>
<td>Surprisingly negative; may indicate that extremely central or remote listings attract niche usage patterns.</td>
</tr>
<tr class="even">
<td><strong>Review Score: Value</strong></td>
<td>–0.0911</td>
<td>Negative effect may reflect that “value” is inversely related to pricing in perception.</td>
</tr>
<tr class="odd">
<td><strong>Instant Bookable</strong></td>
<td>0.3459</td>
<td>Listings that are instantly bookable get significantly more reviews, indicating reduced friction increases booking volume.</td>
</tr>
</tbody>
</table>
<hr>
</section>
<section id="conclusion-2" class="level4">
<h4 class="anchored" data-anchor-id="conclusion-2">Conclusion</h4>
<p>The model reveals that factors such as <strong>number of bedrooms</strong>, <strong>cleanliness</strong>, and <strong>instant bookable status</strong> are strong positive predictors of booking volume (as proxied by review count). In contrast, <strong>higher prices</strong>, more bathrooms, and lower perceived value are associated with fewer bookings. These insights are helpful for hosts optimizing listing strategies and Airbnb improving search algorithms.</p>
</section>
</section>
<section id="final-reflections" class="level3">
<h3 class="anchored" data-anchor-id="final-reflections">Final Reflections</h3>
<p>This project showcased how Poisson regression can be applied to understand patterns in real-world count data. Whether analyzing how often firms receive patents or how frequently Airbnb listings accumulate reviews, the objective was to identify which features meaningfully influence these outcomes.</p>
<p>The Blueprinty analysis emphasized how organizational characteristics—like age and region—affect innovation outcomes, and showed a measurable advantage tied to using the firm’s software. In contrast, the Airbnb study focused on listing attributes such as pricing, room setup, cleanliness ratings, and booking convenience. Across both cases, Poisson modeling proved valuable in capturing the relationship between structured inputs and count-based performance measures.</p>
<p>Constructing the likelihood function manually, then benchmarking it against a built-in GLM, offered more than just technical comparison—it reinforced the benefits of building from the ground up. While the outputs were often aligned, the hands-on process highlighted important details around implementation and diagnostics that wouldn’t be as apparent using pre-built packages alone.</p>
<p>In sum, this work illustrates how statistically grounded, interpretable models can offer clear insights for data-driven decision-making across a variety of practical settings.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>